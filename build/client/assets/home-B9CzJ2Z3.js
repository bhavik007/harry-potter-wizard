import{w as P}from"./with-props-B3HCb01j.js";import{l as e,r as d,p as v}from"./chunk-XJI4KG32-BXFEWMgV.js";const y=()=>e.jsxs("div",{className:"loading-container",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("p",{children:"Loading..."})]}),S=({data:h,columns:x,rowsPerPage:c=5,loading:m})=>{const[r,u]=d.useState(1),[n,a]=d.useState(c),l=Math.ceil(h.length/n),j=h.slice((r-1)*n,r*n),f=()=>{r<l&&u(i=>i+1)},p=()=>{r>1&&u(i=>i-1)},w=()=>{u(1)},g=()=>{u(l)},N=i=>{a(Number(i.target.value)),u(1)};return e.jsx("div",{className:"table-container",children:m?e.jsx(y,{}):e.jsxs(e.Fragment,{children:[e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsx("tr",{children:x.map(i=>e.jsx("th",{className:"table-header",children:i.header},String(i.accessor)))})}),e.jsx("tbody",{children:j.map((i,t)=>e.jsx("tr",{className:"table-row",children:x.map(s=>e.jsx("td",{children:s.customRow?s.customRow(i[s.accessor],i):String(i[s.accessor]||"-")},String(s.accessor)))},t))})]}),e.jsxs("div",{className:"table-pagination",children:[e.jsxs("div",{className:"rows-per-page",children:[e.jsx("label",{htmlFor:"rowsPerPage",children:"Rows per page:"}),e.jsxs("select",{id:"rowsPerPage",value:n,onChange:N,children:[e.jsx("option",{value:5,children:"5"}),e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:20,children:"20"})]})]}),e.jsxs("div",{className:"pagination-controls",children:[e.jsx("button",{onClick:w,disabled:r===1,children:"First"}),e.jsx("button",{onClick:p,disabled:r===1,children:"Previous"}),e.jsxs("span",{children:["Page ",r," of ",l]}),e.jsx("button",{onClick:f,disabled:r===l,children:"Next"}),e.jsx("button",{onClick:g,disabled:r===l,children:"Last"})]})]})]})})},k=({items:h,onSelect:x,labelKey:c,placeholder:m="Select an option"})=>{const r=v.useMemo(()=>{if(c){const n=new Set;return h.filter(a=>{const l=a[c];return n.has(l)?!1:(n.add(l),!0)})}return Array.from(new Set(h))},[h,c]),u=n=>{const a=n.target.value;a!==""&&x(r[parseInt(a,10)])};return e.jsx("div",{className:"dropdown-container",children:e.jsxs("select",{className:"dropdown",onChange:u,defaultValue:"",children:[e.jsx("option",{value:"",disabled:!0,children:m}),r.map((n,a)=>e.jsx("option",{value:a,children:c?n[c]:String(n)},a))]})})},C=({value:h,onChange:x,placeholder:c="Enter text"})=>{const m=r=>{x(r.target.value)};return e.jsx("div",{className:"textbox-container",children:e.jsx("input",{type:"text",className:"textbox",value:h,onChange:m,placeholder:c})})};function I({}){return[{title:"Harry Potter Wizard"}]}const R=P(function(){const[x,c]=d.useState([]),[m,r]=d.useState(null),[u,n]=d.useState(!0),[a,l]=d.useState({Name:"",Ingredient:"",InventorFullName:"",Manufacturer:""}),[j,f]=d.useState(a),p=[{key:"Unknown"},{key:"Advanced"},{key:"Moderate"},{key:"Beginner"},{key:"OrdinaryWizardingLevel"},{key:"OneOfAKind"}],w=[{header:"Name",accessor:"name"},{header:"Difficulty",accessor:"difficulty"},{header:"Ingredients",accessor:"ingredients",customRow:(t,s)=>Array.isArray(t)&&t.length?t.map(o=>o.name).join(", ")||"":"-"},{header:"Inventor Full Name",accessor:"inventors",customRow:(t,s)=>Array.isArray(t)&&t.length?t.map((o,b)=>e.jsxs(v.Fragment,{children:[`${o.firstName} ${o.lastName}`,e.jsx("br",{})]},b)):"-"},{header:"Manufacturer",accessor:"manufacturer"}],g=async(t="")=>{try{n(!0);const s=await fetch("https://wizard-world-api.herokuapp.com/Elixirs?"+t);if(!s.ok)throw new Error(`Error: ${s.status} ${s.statusText}`);const o=await s.json();c(o)}catch(s){r(s.message||"An unknown error occurred.")}finally{n(!1)}};d.useEffect(()=>{g()},[]),d.useEffect(()=>{const t=setTimeout(()=>{f(a)},1e3);return()=>{clearTimeout(t)}},[a]),d.useEffect(()=>{const t=Object.entries(j).filter(([s,o])=>o).map(([s,o])=>`${s}=${o}`).join("&");g(t)},[j]);const N=t=>{l({Name:"",Ingredient:"",InventorFullName:"",Manufacturer:""}),g(`difficulty=${t.key}`)},i=(t,s)=>{l(o=>({...o,[t]:s}))};return m?e.jsxs("div",{children:["Error: ",m]}):e.jsxs("div",{className:"container",children:[e.jsx("div",{className:"header",children:e.jsx("h1",{children:"Hogwarts Elixirs"})}),e.jsxs("div",{className:"filter-dropdown-container",children:[e.jsx("div",{className:"filter-container",children:Object.keys(a).map(t=>e.jsx(C,{value:a[t],onChange:s=>i(t,s),placeholder:`Search by ${t}`},t))}),e.jsx("div",{className:"dropdown-container",children:e.jsx(k,{items:p,onSelect:N,labelKey:"key",placeholder:"Select Difficulty"})})]}),e.jsx("div",{className:"table-container",children:e.jsx(S,{data:x,columns:w,rowsPerPage:5,loading:u})})]})});export{R as default,I as meta};
